{"version":3,"sources":["../../src/models/Project.js"],"names":["ObjectId","mongoose","Schema","Types","projectSchema","subject","type","required","icon","String","title","description","default","createdAt","Date","endDate","studentProjects","Project","module","exports","model","getBySubjects","subjects","err","project","projectsId","projects","i","length","findById","push"],"mappings":";;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;AAEA,IAAIA,WAAWC,mBAASC,MAAT,CAAgBC,KAAhB,CAAsBH,QAArC;AACA,IAAII,gBAAgBH,mBAASC,MAAT,CAAgB;AAClCG,WAAS;AACPC,UAAMN,QADC;AAEPO,cAAU;AAFH,GADyB;AAKlCC,QAAM;AACJF,UAAMG;AADF,GAL4B;AAQlCC,SAAO;AACLJ,UAAMG,MADD;AAELF,cAAU;AAFL,GAR2B;AAYlCI,eAAa;AACXL,UAAMG,MADK;AAEXG,aAAS;AAFE,GAZqB;AAgBlCC,aAAW;AACTP,UAAMQ,IADG;AAETF,aAAS,IAAIE,IAAJ;AAFA,GAhBuB;AAoBlCC,WAAS;AACPT,UAAMQ,IADC;AAEPF,aAAS,IAAIE,IAAJ;AAFF,GApByB;AAwBlCE,mBAAiB,CAAChB,QAAD;AAxBiB,CAAhB,CAApB;;AA2BA,IAAIiB,UAAUC,OAAOC,OAAP,GAAiBlB,mBAASmB,KAAT,CAAe,SAAf,EAAyBhB,aAAzB,CAA/B;;AAEAc,OAAOC,OAAP,CAAeE,aAAf;AAAA,qEAA+B,iBAAOC,QAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AACzBC,eADyB,WACpBC,OADoB;AAEzBC,sBAFyB,GAEZ,EAFY;AAGzBC,oBAHyB,GAGd,EAHc;;;AAK7B,iBAAQC,CAAR,GAAU,CAAV,EAAYA,IAAEL,SAASM,MAAvB,EAA8BD,GAA9B,EAAkC;AAChCF,wDAAiBA,UAAjB,sBAAgCH,SAASK,CAAT,EAAYD,QAA5C;AACD;;AAEOC,aATqB,GASnB,CATmB;;AAAA;AAAA,kBASjBA,IAAEF,WAAWG,MATI;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAUJ,kBAAGX,QAAQY,QAAR,CAAiBJ,WAAWE,CAAX,CAAjB,CAAH,CAVI;;AAAA;AAAA;AAAA;AAU1BJ,eAV0B;AAUrBC,mBAVqB;;AAW3BE,qBAASI,IAAT,CAAcN,OAAd;;AAX2B;AASGG,eATH;AAAA;AAAA;;AAAA;AAAA,6CActB,CAACJ,GAAD,EAAMG,QAAN,EAAgBD,UAAhB,CAdsB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA/B;;AAAA;AAAA;AAAA;AAAA","file":"Project.js","sourcesContent":["import mongoose from 'mongoose';\r\nimport Model from './Model';\r\nimport to from '../to';\r\n\r\nvar ObjectId = mongoose.Schema.Types.ObjectId;\r\nvar projectSchema = mongoose.Schema({\r\n  subject: {\r\n    type: ObjectId,\r\n    required: true\r\n  },\r\n  icon: {\r\n    type: String\r\n  },\r\n  title: {\r\n    type: String,\r\n    required: true\r\n  },\r\n  description: {\r\n    type: String,\r\n    default: ''\r\n  },\r\n  createdAt: {\r\n    type: Date,\r\n    default: new Date()\r\n  },\r\n  endDate: {\r\n    type: Date,\r\n    default: new Date()\r\n  },\r\n  studentProjects: [ObjectId]\r\n})\r\n\r\nvar Project = module.exports = mongoose.model('project',projectSchema);\r\n\r\nmodule.exports.getBySubjects = async (subjects) =>{\r\n  let err, project;\r\n  let projectsId = [];\r\n  let projects = [];\r\n\r\n  for(var i=0;i<subjects.length;i++){\r\n    projectsId = [...projectsId, ...subjects[i].projects];\r\n  }\r\n\r\n  for(var i=0;i<projectsId.length;i++){\r\n    [err, project] = await to(Project.findById(projectsId[i]));\r\n    projects.push(project)\r\n  }\r\n\r\n  return [err, projects, projectsId];\r\n}\r\n"]}